enum BannerType {
    TEXT // Banner with text content (badge, title, description, etc)
    IMAGE // Banner with only image
}

enum BannerPosition {
    MAIN_CAROUSEL // Main carousel banner (left side)
    SIDE_TOP // Top side banner (right side)
    SIDE_BOTTOM // Bottom side banner (right side)
}

model BannerGroup {
    id          String    @id @default(uuid())
    name        String    @db.VarChar(255)
    slug        String    @unique @db.VarChar(255)
    description String?   @db.Text
    isActive    Boolean   @default(true) @map("is_active")
    startDate   DateTime? @map("start_date")
    endDate     DateTime? @map("end_date")
    createdAt   DateTime  @default(now()) @map("created_at")
    updatedAt   DateTime  @updatedAt @map("updated_at")

    banners BannerGroupMapping[]

    @@index([slug])
    @@index([isActive])
    @@map("banner_groups")
}

model Banner {
    id       String         @id @default(uuid())
    type     BannerType     @default(TEXT)
    position BannerPosition @default(MAIN_CAROUSEL)

    // Text content (for TEXT type)
    badge       String? @db.VarChar(100)
    title       String? @db.VarChar(255)
    description String? @db.Text
    highlight   String? @db.VarChar(255)
    ctaText     String? @map("cta_text") @db.VarChar(100)
    ctaLink     String? @map("cta_link") @db.VarChar(500)
    subLabel    String? @map("sub_label") @db.VarChar(255)

    // Styling - Gradient colors
    gradientFrom String? @map("gradient_from") @db.VarChar(50)
    gradientTo   String? @map("gradient_to") @db.VarChar(50)

    // Image (for IMAGE type or as background)
    imageMediaId String? @map("image_media_id")

    // Settings
    sortOrder Int      @default(0) @map("sort_order")
    isActive  Boolean  @default(true) @map("is_active")
    createdAt DateTime @default(now()) @map("created_at")
    updatedAt DateTime @updatedAt @map("updated_at")

    groups     BannerGroupMapping[]
    imageMedia Media?               @relation("BannerImage", fields: [imageMediaId], references: [id], onDelete: SetNull)

    @@index([position])
    @@index([isActive])
    @@map("banners")
}

// Junction table for many-to-many relationship
model BannerGroupMapping {
    id            String   @id @default(uuid())
    bannerId      String   @map("banner_id")
    bannerGroupId String   @map("banner_group_id")
    sortOrder     Int      @default(0) @map("sort_order")
    createdAt     DateTime @default(now()) @map("created_at")

    banner      Banner      @relation(fields: [bannerId], references: [id], onDelete: Cascade)
    bannerGroup BannerGroup @relation(fields: [bannerGroupId], references: [id], onDelete: Cascade)

    @@unique([bannerId, bannerGroupId])
    @@index([bannerId])
    @@index([bannerGroupId])
    @@map("banner_group_mappings")
}
