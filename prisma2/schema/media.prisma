enum MediaType {
  PRODUCT_IMAGE
  PRODUCT_VIDEO
  REVIEW_IMAGE
  REVIEW_VIDEO
  AVATAR
  CATEGORY_IMAGE
  BRAND_LOGO
}

model Media {
  id           String    @id @default(uuid())
  url          String    @db.VarChar(500)
  key          String    @db.VarChar(500)
  filename     String    @db.VarChar(255)
  mimetype     String    @db.VarChar(100)
  size         Int
  type         MediaType
  uploadedById String?   @map("uploaded_by_id")
  isDeleted    Boolean   @default(false) @map("is_deleted")
  createdAt    DateTime  @default(now()) @map("created_at")
  updatedAt    DateTime  @updatedAt @map("updated_at")

  uploadedBy    User?          @relation("UserUploadedMedia", fields: [uploadedById], references: [id], onDelete: SetNull)
  productImages ProductImage[]
  reviewImages  ReviewImage[]
  userAvatars   User[]         @relation("UserAvatar")
  categories    Category[]     @relation("CategoryImage")
  brands        Brand[]        @relation("BrandLogo")

  @@index([type])
  @@index([uploadedById])
  @@index([key])
  @@map("media")
}
